<!DOCTYPE html>
<html>
<head>
  <title>AVL Tree Visualizer</title>
  <style>
    body {
      font-family: Arial;
      text-align: center;
      margin-top: 20px;
    }

    input {
      width: 150px;
      padding: 5px;
    }

    button {
      padding: 6px 12px;
      margin-left: 5px;
    }

    .tree {
      margin-top: 30px;
    }

    .node {
      display: inline-block;
      padding: 6px 10px;
      border: 2px solid black;
      border-radius: 50%;
      margin: 10px;
      min-width: 30px;
    }

    .children {
      display: flex;
      justify-content: center;
    }
  </style>
</head>

<body>

  <h3>AVL Tree Visualizer</h3>

  <input id="value" type="number" placeholder="Enter number">
  <button onclick="insert()">Insert</button>

  <div id="tree" class="tree"></div>

<script>
  class Node {
    constructor(val) {
      this.val = val;
      this.left = null;
      this.right = null;
      this.height = 1;
    }
  }

  let root = null;

  function height(n) {
    return n ? n.height : 0;
  }

  function balance(n) {
    return n ? height(n.left) - height(n.right) : 0;
  }

  function rightRotate(y) {
    let x = y.left;
    let T2 = x.right;

    x.right = y;
    y.left = T2;

    y.height = Math.max(height(y.left), height(y.right)) + 1;
    x.height = Math.max(height(x.left), height(x.right)) + 1;

    return x;
  }

  function leftRotate(x) {
    let y = x.right;
    let T2 = y.left;

    y.left = x;
    x.right = T2;

    x.height = Math.max(height(x.left), height(x.right)) + 1;
    y.height = Math.max(height(y.left), height(y.right)) + 1;

    return y;
  }

  function insertNode(node, val) {
    if (!node) return new Node(val);

    if (val < node.val)
      node.left = insertNode(node.left, val);
    else if (val > node.val)
      node.right = insertNode(node.right, val);
    else
      return node;

    node.height = 1 + Math.max(height(node.left), height(node.right));

    let b = balance(node);

    // LL
    if (b > 1 && val < node.left.val)
      return rightRotate(node);

    // RR
    if (b < -1 && val > node.right.val)
      return leftRotate(node);

    // LR
    if (b > 1 && val > node.left.val) {
      node.left = leftRotate(node.left);
      return rightRotate(node);
    }

    // RL
    if (b < -1 && val < node.right.val) {
      node.right = rightRotate(node.right);
      return leftRotate(node);
    }

    return node;
  }

  function insert() {
    let v = document.getElementById("value").value;
    if (v === "") return;
    root = insertNode(root, parseInt(v));
    document.getElementById("value").value = "";
    draw();
  }

  function drawNode(node) {
    if (!node) return "";

    let html = `<div class="node">${node.val}</div>`;

    if (node.left || node.right) {
      html += `<div class="children">`;
      html += `<div>${drawNode(node.left)}</div>`;
      html += `<div>${drawNode(node.right)}</div>`;
      html += `</div>`;
    }
    return html;
  }

  function draw() {
    document.getElementById("tree").innerHTML = drawNode(root);
  }
</script>

</body>
</html>
